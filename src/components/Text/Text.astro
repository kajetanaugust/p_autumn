---
import type { Color } from '@tokens/types'

import { getDefaultTag } from './helpers'

import type { FontWeight, FontStyle, TextTag, TextVariant } from './types'

interface Props {
  variant?: TextVariant
  weight?: FontWeight
  style?: FontStyle
  textDecoration?: 'none' | 'underline' | 'lineThrough'
  color?: Color
  tag?: TextTag
  class?: string
  textWrap?: 'wrap' | 'nowrap'
  textAlign?: 'left' | 'center' | 'right'

  [key: string]: any
}

const {
  variant = 'body-medium',
  textWrap = 'wrap',
  textAlign = 'left',
  weight,
  style,
  textDecoration = 'none',
  color = 'neutral-darkest',
  tag,
  class: className = '',
  ...rest
} = Astro.props

const Tag = tag || getDefaultTag(variant)
---

<Tag
  class={`text--${variant} ${className}`}
  style={{
    '--text-color': `var(--${color})`,
    '--text-weight': weight,
    '--text-style': style,
    '--text-decoration': textDecoration,
    '--text-wrap': textWrap,
    '--text-align': textAlign,
  }}
  {...rest}
  x-apple-data-detectors="false"
>
  <slot />
</Tag>
